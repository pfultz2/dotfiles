#!/bin/bash

CURRENT_DIR=${CURRENT_DIR:-`pwd`}
DATA_DIR=${DATA_DIR:-/data}
DOCKER_OPTIONS=(-v="$CURRENT_DIR:$DATA_DIR" -w /data)
if [ -f /etc/localtime ]; then
    DOCKER_OPTIONS+=(-v='/etc/localtime:/etc/localtime')
fi

ls /dev/kfd && DOCKER_OPTIONS+=(--device='/dev/kfd')

# DOCKER_HOME=$(docker run $1 sh -c 'echo $HOME')
# DOCKER_USER=$(id -u)
# -v="$HOME/.ssh:$DOCKER_HOME/.ssh:ro"
echo "docker run -it ${DOCKER_OPTIONS[@]} $@"
docker run -it ${DOCKER_OPTIONS[@]} $@

